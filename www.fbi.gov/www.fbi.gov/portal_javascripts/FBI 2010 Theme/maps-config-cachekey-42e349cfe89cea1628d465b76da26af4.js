
/* Merged Plone Javascript file
 * This file is dynamically assembled from separate parts.
 * Some of these parts have 3rd party licenses or copyright information attached
 * Such information is valid for that section,
 * not for the entire composite file
 * originating files are separated by - filename.js -
 */

/* - maps-config.js - */
// http://www.fbi.gov/portal_javascripts/maps-config.js?original=1
var mapsConfig={google:{apikey:'',ajaxsearchkey:'',maxinfowidth:400,locationnotfound:'The location \'[LOCATION]\' couldn\'t be found.',selectablemaptypes:true,defaultmaptype:'normal',maxzoomlevel:13,initialzoomlevel:12,markericons:[{'infoWindowAnchor':[9,2],'infoShadowAnchor':[18,25],'iconSize':[20,34],'name':'Red Marker','icon':'http://www.fbi.gov/marker-red.png','iconAnchor':[9,34],'shadowSize':[37,34],'shadow':'http://www.fbi.gov/shadow50.png'},{'infoWindowAnchor':[9,2],'infoShadowAnchor':[18,25],'iconSize':[20,34],'name':'Green Marker','icon':'http://www.fbi.gov/marker-green.png','iconAnchor':[9,34],'shadowSize':[37,34],'shadow':'http://www.fbi.gov/shadow50.png'},{'infoWindowAnchor':[9,2],'infoShadowAnchor':[18,25],'iconSize':[20,34],'name':'Blue Marker','icon':'http://www.fbi.gov/marker-blue.png','iconAnchor':[9,34],'shadowSize':[37,34],'shadow':'http://www.fbi.gov/shadow50.png'},{'infoWindowAnchor':[9,2],'infoShadowAnchor':[18,25],'iconSize':[20,34],'name':'Yellow Marker','icon':'http://www.fbi.gov/marker-yellow.png','iconAnchor':[9,34],'shadowSize':[37,34],'shadow':'http://www.fbi.gov/shadow50.png'},{'infoWindowAnchor':[9,2],'infoShadowAnchor':[18,25],'iconSize':[20,34],'name':'Magenta Marker','icon':'http://www.fbi.gov/marker-magenta.png','iconAnchor':[9,34],'shadowSize':[37,34],'shadow':'http://www.fbi.gov/shadow50.png'}]}};

/* - maps-googlemaps.js - */
// http://www.fbi.gov/portal_javascripts/maps-googlemaps.js?original=1
var mapsGoogleMaps=function(){var _20=mapsConfig;var _0=_20.google;var _3=cssQuery;var _2=parseInt;var _6=parseFloat;var _5=null;var _1=null;var _4=null;var _10=null;function _8(){
function L(lo,la){this._22=lo;this._21=la};L.prototype=new GControl();L.prototype._14=function(co,la){var c=document.createElement("input");var lo=this._22;var layers=this._21['enabled'];c.type="checkbox";c.defaultChecked=true;c.onclick=function(e){layers[la]=c.checked;for(var i=0;i<lo.length;i++){var l=lo[i];var m=l['marker'];var v=false;if(typeof l['layers']=='undefined'){v=true}else{for(var n in l['layers']){if(layers[n]==true){v=true;break}}}if(v){m.show()}else{m.hide()}}};var l=document.createElement("label");l.style.display="block";l.appendChild(c);l.appendChild(document.createTextNode(la));co.appendChild(l)};L.prototype.initialize=function(m){var c=document.createElement("div");var la=this._21['enabled'];for(var n in la){if(la[n]){this._14(c,n)}}c.style.backgroundColor="white";c.style.border="1px solid black";c.style.padding="2px";c.style.fontSize="90%";m.getContainer().appendChild(c);return c};L.prototype.getDefaultPosition=function(){return new GControlPosition(G_ANCHOR_BOTTOM_RIGHT,new GSize(7,16))};return L};function _18(de){if(_5==null){_5={};for(var j=0;j<de.markericons.length;j++){var d=de.markericons[j];var i=new GIcon();i.image=d['icon'];i.iconSize=new GSize(_2(d['iconSize'][0]),_2(d['iconSize'][1]));i.iconAnchor=new GPoint(_2(d['iconAnchor'][0]),_2(d['iconAnchor'][1]));i.infoWindowAnchor=new GPoint(_2(d['infoWindowAnchor'][0]),_2(d['infoWindowAnchor'][1]));i.shadow=d['shadow'];i.shadowSize=new GSize(_2(d['shadowSize'][0]),_2(d['shadowSize'][1]));i.infoShadowAnchor=new GPoint(_2(d['infoShadowAnchor'][0]),_2(d['infoShadowAnchor'][1]));_5[d['name']]=i}}if(_1==null){if(de.defaultmaptype=='satellite'){_1=G_SATELLITE_MAP}else if(de.defaultmaptype=='hybrid'){_1=G_HYBRID_MAP}else if(de.defaultmaptype=='physical'){_1=G_PHYSICAL_MAP}else{_1=G_NORMAL_MAP}}};function _16(m,n){GEvent.addListener(m,"click",function(){m.openInfoWindow(n,{maxWidth:_0.maxinfowidth})})};function _11(m,t){GEvent.addListener(m,"click",function(){m.openInfoWindowTabs(t,{maxWidth:_0.maxinfowidth})})};function _9(d){d['marker']=new GMarker(d['point'],d['icon']);d['info_windows']=[];for(var j=0;j<d['tabs'].length;j++){var t=d['tabs'][j];var i=new GInfoWindowTab(t['title'],t['node']);d['info_windows'].push(i)}if(d['info_windows'].length>1){_11(d['marker'],d['info_windows'])}else{_16(d['marker'],d['tabs'][0]['node'])}};function _17(m,r){var r=[];var d;var f=true;for(var j=0;j<m.length;j++){n=m[j];if(n.nodeType!=1)continue;if(hasClassName(n,'title')){n.parentNode.removeChild(n);if(d){_9(d);r.push(d)}d={};d['tabs']=[];var t={};d['tabs'].push(t);var dl=document.createElement('dl');dl.appendChild(n);addClassName(dl,"mapsMarker");t['node']=dl;f=true;var i=_3("img.marker",n);if(i.length>0){i=i[0];i.parentNode.removeChild(i);a=i.alt;i=_5[a];d['icon']=i}continue}if(hasClassName(n,'geo')){n.parentNode.removeChild(n);var la=_3(".latitude",n);var lo=_3(".longitude",n);if(la.length>0&&lo.length>0){d['point']=new GLatLng(_6(getInnerTextFast(la[0])),_6(getInnerTextFast(lo[0])))}continue}if(hasClassName(n,'tab')){n.parentNode.removeChild(n);var t={};if(f){f=false;t=d['tabs'][0]}else{d['tabs'].push(t);dl=document.createElement('dl');addClassName(dl,"mapsMarker");t['node']=dl}t['node'].appendChild(n);t['title']=n.title;continue}if(hasClassName(n,'layers')){n.parentNode.removeChild(n);var no=_3("li",n);d['layers']={};for(var k=0;k<no.length;k++){d['layers'][getInnerTextFast(no[k])]=true}continue}n.parentNode.removeChild(n);d['tabs'][0]['node'].appendChild(n)}if(d){_9(d);r.push(d)}return r};function _19(n){var l=_3("dl",n);var n=[];for(var j=0;j<l.length;j++){for(var k=0;k<l[j].childNodes.length;k++){n.push(l[j].childNodes[k])}l[j].parentNode.removeChild(l[j])}return _17(n)};function _24(l){var b=new GLatLngBounds();for(var i=0;i<l.length;i++){b.extend(l[i]['point'])}return b};function _23(lo){var d={names:[],counts:{},enabled_names:[],enabled:{}};for(var i=0;i<lo.length;i++){var l=lo[i];if(l['layers']){for(var n in l['layers']){if(d['counts'][n]==null){d['counts'][n]=1;d['names'].push(n)}else{d['counts'][n]=d['counts'][n]+1}}}}for(var i=0;i<d['names'].length;i++){var n=d['names'][i];if(d['counts'][n]>0){d['enabled'][n]=true;d['enabled_names'].push(n)}else{d['enabled'][n]=false}}return d};function _25(n){var l=_19(n);var la=_23(l);var b=_24(l);var c=b.getCenter();var ma=document.createElement('div');addClassName(n,'googleMapActive');addClassName(ma,'googleMapPane');n.appendChild(ma);var m=new GMap2(ma);m.addMapType(G_PHYSICAL_MAP);var z=m.getBoundsZoomLevel(b);if(z>_0.maxzoomlevel)z=_0.maxzoomlevel;m.setCenter(c,z,_1);m.addControl(new GLargeMapControl());if((la['enabled_names'].length>0)&&(l.length>1)){m.addControl(new _10(l,la))}if(_0.selectablemaptypes){m.addControl(new GMapTypeControl())}for(var i=0;i<l.length;i++){m.addOverlay(l[i]['marker'])}};function _13(i,m,ma,l){var g=new GClientGeocoder();var q=document.createElement('input');var s=document.createElement('input');var f=null;var o=null;f=i[0];do{if(f.tagName){if(f.tagName.toLowerCase()=='form'){break}if(f.tagName.toLowerCase()=='body'){f=null;break}f=f.parentNode}}while(f);i[0].style.display="none";i[1].style.display="none";q.setAttribute("type","text");q.value=i[0].value+', '+i[1].value;s.setAttribute("type","button");s.value="Search";s.className="searchButton";fu=function(e){var a=q.value;var _12=function(){var pl=_4.results[0];if(pl){var p=new GLatLng(pl.lat,pl.lng);i[0].value=p.lat();i[1].value=p.lng();l.innerHTML=p.lat()+", "+p.lng();ma.setPoint(p);if(pl.streetAddress){ma.openInfoWindowHtml(pl.streetAddress)}else{ma.openInfoWindowHtml(a)}m.setCenter(p,_0.initialzoomlevel)}else{var msg=_0.locationnotfound;msg=msg.replace(/\[LOCATION\]/,a);alert(msg)}};var _15=function(r){if(!r||r.Status.code!=200){if(_4!=null){_4.setSearchCompleteCallback(null,_12);_4.execute(a)}else{var msg=_0.locationnotfound;msg=msg.replace(/\[LOCATION\]/,a);alert(msg)}}else{var pl=r.Placemark[0];var p=pl.Point.coordinates;p=new GLatLng(p[1],p[0]);i[0].value=p.lat();i[1].value=p.lng();l.innerHTML=p.lat()+", "+p.lng();ma.setPoint(p);ma.openInfoWindowHtml(pl.address);m.setCenter(p,_0.initialzoomlevel)}};g.getLocations(a,_15);var n=_3("input[type=submit]",f);for(var j=0;j<n.length;j++){removeClassName(n[j],'submitting')}return false};q.onfocus=function(e){if(f){o=f.onsubmit;f.onsubmit=fu}};q.onblur=function(e){if(f){f.onsubmit=o}};s.onclick=fu;i[0].parentNode.insertBefore(q,i[0]);i[0].parentNode.insertBefore(s,i[0])};function _7(n){var i=_3("input",n);if(i.length!=2)return;var l=document.createElement('div');addClassName(l,"locationString discreet");var ma=document.createElement('div');addClassName(n,'googleMapActive');addClassName(ma,'googleMapPane');n.appendChild(ma);n.appendChild(l);var m=new GMap2(ma);l.innerHTML=i[0].value+","+i[1].value;var c=new GLatLng(_6(i[0].value),_6(i[1].value));m.setCenter(c,_0.initialzoomlevel,_1);m.addControl(new GLargeMapControl());if(_0.selectablemaptypes){m.addControl(new GMapTypeControl())}var ma=new GMarker(c,{draggable:true});m.addOverlay(ma);GEvent.addListener(ma,"dragend",function(){var p=ma.getPoint();i[0].value=p.lat();i[1].value=p.lng();l.innerHTML=p.lat()+", "+p.lng()});GEvent.addListener(m,"click",function(o,p){if(!o){ma.setPoint(p);i[0].value=p.lat();i[1].value=p.lng();l.innerHTML=p.lat()+", "+p.lng()}});_13(i,m,ma,l)};return{init:function(){registerEventListener(window,'unload',GUnload);_10=_8();if(GBrowserIsCompatible()){_18(_0);if(mapsConfig.google.ajaxsearchkey){_4=new GlocalSearch()}var m=_3("div.googleMapView");for(var i=0;i<m.length;i++){_25(m[i])}var m=_3("div.googleMapEdit");for(var i=0;i<m.length;i++){_7(m[i])}}},loadJS:function(url){document.write('<'+'script type="text/javascript" src="'+url+'"><'+'/script>')}}}();mapsGoogleMaps.loadJS(window.location.protocol+"//maps.google.com/maps?file=api&v=2&key="+mapsConfig.google.apikey);if(mapsConfig.google.ajaxsearchkey){mapsGoogleMaps.loadJS(window.location.protocol+"//www.google.com/uds/api?file=uds.js&amp;v=1.0&key="+mapsConfig.google.ajaxsearchkey)}registerEventListener(window,'load',mapsGoogleMaps.init);
